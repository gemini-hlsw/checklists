<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Gemini Checklists</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Gemini Dashboard">
    <meta name="author" content="Carlos Quiroz">

    <!-- CSS -->
    <link href="@routes.Assets.at("stylesheets/bootstrap.min.css")" rel="stylesheet" />
    <link href="@routes.Assets.at("stylesheets/datepicker.css")" rel="stylesheet" />
    <link href="@routes.Assets.at("stylesheets/font-awesome.css")" rel="stylesheet" />

    <link href="@routes.Assets.at("stylesheets/bootstrap-responsive.min.css")" rel="stylesheet" />
    <link href="@routes.Assets.at("stylesheets/main.css")" rel="stylesheet" />

    <script src="@routes.Assets.at("javascripts/modernizr.js")"></script>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- bootstrap fav and touch icons, replace with your own -->
    <link rel="shortcut icon" href="../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">

  </head>

  <body>
    <script type="text/x-handlebars" data-template-name="application">
    <div class="navbar">
      <div class="navbar-inner">
        <a class="brand" href="#">Gemini Checklists</a>
          {{outlet toolbar}}
      </div>
    </div>
      <div class="content-fluid">
        <div class="row-fluid">
          {{outlet main}}
        </div>
      </div>
    </script>
    <script type="text/x-handlebars" data-template-name="toolbar">
        <ul class="nav pull-right">
          <li class="active">
            <button class="btn" {{action editTemplate this}}>Edit {{site}} Template</button>
        </ul>
    </script>
    <script type="text/x-handlebars" data-template-name="site_switch">
      <ul class="nav pull-right">
        <li class="active">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
          Change Site
          <b class="caret"></b>
          </a>
            <ul class="dropdown-menu">
              <li><a tabindex="-1" href="#">Gemini South</a></li>
              <li><a tabindex="-1" href="#">Gemini North</a></li>
            </ul>
        </li>
      </ul>
    </script>
    <script type="text/x-handlebars" data-template-name="calendar">
      <ul class="nav pull-right">
        <li class="active">
          {{view Checklists.DatePicker dataBinding="date" inputFormat=Checklists.urlDateFormat format="dd/mm/yyyy"}}
        </li>
      </ul>
    </script>
    <script type="text/x-handlebars" data-template-name="datepicker">
        {{view Ember.TextField class="span2 input-small date-field" size="16" type="text" size="16" disabled="true" valueBinding="view.data"}}
        <span class="add-on"><i class="icon-calendar"></i></span>
    </script>
    <script type="text/x-handlebars" data-template-name="sites">
      {{#if isLoaded}}
        <div class="span6 offset3 centered-content">
          <div class="well centered-content">
            <h1>Select site</h1>
            <div class="btn-group btn-group-vertical">
              {{#each site in content}}
                <button class="btn btn-large site-button" {{action siteChecklist site}}>{{site.name}}</button>
              {{/each}}
            </div>
          </div>
        </div>
      {{else}}
        {{view Checklists.OverlayView}}
      {{/if}}
    </script>
    <script type="text/x-handlebars" data-template-name="overlay">
      <div class="overlay"></div>
    </script>
    <script type="text/x-handlebars" data-template-name="edit_template">
        <div class="span6 offset3 centered-content">
          <div class="well centered-content">
            <div class="row-fluid">
            <h1>{{name}} template</h1>
              <button class="btn btn-success pull-right" {{action addGroup group.name target="view"}}>Add Group</button>
              <table class="table table-stripped table-bordered">
                <tbody>
                  {{#each group in groups}}
                    <tr class="group-header">
                        <td><h4>{{view Ember.TextField name="check" valueBinding="group.title"}}</h4></td>
                        <td class="centered"><button class="btn btn-danger pull-right" {{action deleteGroup group.name target="view"}}>Delete Group</button></td>
                    </tr>
                      {{#each item in group.checks}}
                        <tr>
                          <td>{{view Ember.TextField name="check" valueBinding="item"}}</td>
                            <td class="centered"><button class="btn btn-danger pull-right" {{action deleteGroup group}}>Delete Check</button></td>
                        </tr>
                      {{/each}}
                  {{/each}}
                </tbody>
              </table>
              <div class="row-fluid">
                <button class="btn btn-primary pull-right" {{action saveTemplate this}}>Save</button>
              </div>
          </div>
        </div>
    </script>
    <script type="text/x-handlebars" data-template-name="checklist">
      {{#if isLoaded}}
        <div class="span6 offset3 centered-content">
          <div class="well centered-content">
            <div class="row-fluid">
            <h1>{{name}} checklist for {{longFormattedDate}}</h1>
            <table class="table table-stripped table-bordered">
              <thead>
                <tr>
                  <th><h3>Systems functional checks</h3></th>
                  <th><h3>Status</h3></th>
                  <th><h3>Comment</h3></th>
                </tr>
              </thead>
              <tbody>
                {{#each group in groups}}
                <tr><td class="group-header" colspan="3"><h4>{{group.title}}</h4></td></tr>
                    {{#each item in group.checks}}
                      <tr>
                        <td class="centered">{{item.description}}</td>
                        <td class="centered centered-content">
                          {{view Ember.Select
                              class="input-small"
                              contentBinding="Checklists.CheckValues"
                              selectionBinding="item.status"}}
                        </td>
                        <td class="centered centered-content">{{view Ember.TextField name="description" valueBinding="item.comment"}}</td>
                      </tr>
                    {{/each}}
                {{/each}}
              </tbody>
            </table>
            </div>
            <div class="row-fluid">
              <button class="btn pull-left" {{action goToPrevious}}><< Prev</button>
              <button class="btn pull-left" {{action goToNext}}>Next >></button>
              <button class="btn btn-primary pull-right" {{action saveChecklist this}}>Save</button>
            </div>
          </div>
        </div>
      {{else}}
        {{view Checklists.OverlayView}}
      {{/if}}
    </script>

    <!-- JS Files
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="@routes.Assets.at("javascripts/jquery-1.8.2.min.js")"></script>
    <script src="@routes.Assets.at("javascripts/bootstrap.min.js")"></script>
    <script src="@routes.Assets.at("javascripts/bootstrap-datepicker.js")"></script>
    <script src="@routes.Assets.at("javascripts/moment.min.js")"></script>
    <script src="@routes.Assets.at("javascripts/bootbox.min.js")"></script>
    <script src="@routes.Assets.at("javascripts/spin.min.js")"></script>
    <script src="@routes.Assets.at("javascripts/jquery.spin.js")"></script>

    <script src="@routes.Assets.at("javascripts/handlebars-1.0.rc.1.js")"></script>
    <script src="@routes.Assets.at("javascripts/ember-1.0.0-pre.2.js")"></script>

    <script src="@routes.Assets.at("checklists.js")"></script>

  </body>
</html>
